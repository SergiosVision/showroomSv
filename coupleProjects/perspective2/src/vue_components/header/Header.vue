<template>
    <header :class="{'t-headerWhite': $route.path !== '/' || currentWidth < 768, 't-mobileMenuActive': currentWidth < 768 && mobVisible}">
        <div class="t-headerLeftSide">
            <router-link tag="div" to="/" class="t-logo">
                <div class="t-logoLeftP"></div>
                <div class="t-logoRightP">
                    <svg width="127" height="20" viewBox="0 0 127 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.66 15.366c-.307 0-.573-.113-.8-.34a1.095 1.095 0 0 1-.34-.8V1.906c0-.306.113-.573.34-.8.227-.226.493-.34.8-.34h9c.307 0 .573.114.8.34.227.227.34.494.34.8v12.32c0 .307-.113.574-.34.8-.227.227-.493.34-.8.34H9.52a1.13 1.13 0 0 1-1.12-1.14V3.666c0-.106-.06-.16-.18-.16H4.1c-.12 0-.18.054-.18.16v10.56c0 .307-.113.574-.34.8a1.03 1.03 0 0 1-.78.34H1.66zm17.436-8.42c-.6 0-1.053.16-1.36.48-.306.307-.5.84-.58 1.6 0 .107.047.16.14.16h3.38c.12 0 .18-.06.18-.18-.053-1.373-.64-2.06-1.76-2.06zm.5 8.62c-1.813 0-3.213-.46-4.2-1.38-.973-.92-1.46-2.26-1.46-4.02 0-1.746.434-3.08 1.3-4 .88-.933 2.147-1.4 3.8-1.4 3.174 0 4.787 1.734 4.84 5.2 0 .32-.126.594-.38.82-.24.214-.52.32-.84.32h-5.34c-.133 0-.186.06-.16.18.107.734.387 1.26.84 1.58.467.307 1.16.46 2.08.46.6 0 1.247-.086 1.94-.26a.815.815 0 0 1 .74.16c.227.174.34.4.34.68v.04c0 .334-.106.64-.32.92-.2.267-.46.427-.78.48-.773.147-1.573.22-2.4.22zm9.49-6.64v2.48c0 .44.2.847.6 1.22.413.36.88.54 1.4.54.613 0 1.1-.246 1.46-.74.36-.506.54-1.26.54-2.26 0-2-.667-3-2-3-.52 0-.987.187-1.4.56-.4.36-.6.76-.6 1.2zm-2.02 10.84c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8V6.106c0-.306.113-.573.34-.8.226-.226.493-.34.8-.34h.8c.32 0 .593.114.82.34.226.214.346.48.36.8v.16c0 .014.006.02.02.02l.04-.04c.853-.986 1.88-1.48 3.08-1.48 1.24 0 2.226.467 2.96 1.4.746.934 1.12 2.267 1.12 4 0 1.68-.387 3-1.16 3.96-.76.96-1.734 1.44-2.92 1.44-1.107 0-2.094-.406-2.96-1.22-.014-.013-.027-.02-.04-.02-.014 0-.02.007-.02.02v4.28c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-.96zm15.882-4.2c-1.72 0-3.04-.453-3.96-1.36-.92-.906-1.38-2.253-1.38-4.04 0-1.746.44-3.08 1.32-4 .894-.933 2.167-1.4 3.82-1.4.547 0 1.274.06 2.18.18.334.054.6.207.8.46.214.24.32.527.32.86v.2c0 .28-.113.507-.34.68a.917.917 0 0 1-.76.18 9.97 9.97 0 0 0-1.68-.14c-.76 0-1.326.24-1.7.72-.373.467-.56 1.22-.56 2.26 0 1.054.2 1.814.6 2.28.4.467 1.02.7 1.86.7.614 0 1.167-.053 1.66-.16a.815.815 0 0 1 .74.16c.227.174.34.4.34.68v.2c0 .334-.106.634-.32.9-.213.254-.48.407-.8.46-.733.12-1.446.18-2.14.18zm6.95-.2c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8v-8.12c0-.306.113-.573.34-.8.226-.226.493-.34.8-.34h7.2c.306 0 .573.114.8.34.226.227.34.494.34.8v8.12c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-1c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8v-6.74c0-.106-.054-.16-.16-.16h-2.6c-.107 0-.16.054-.16.16v6.74c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-1zm15.448-8.42c-.6 0-1.053.16-1.36.48-.306.307-.5.84-.58 1.6 0 .107.047.16.14.16h3.38c.12 0 .18-.06.18-.18-.053-1.373-.64-2.06-1.76-2.06zm.5 8.62c-1.813 0-3.213-.46-4.2-1.38-.973-.92-1.46-2.26-1.46-4.02 0-1.746.434-3.08 1.3-4 .88-.933 2.147-1.4 3.8-1.4 3.174 0 4.787 1.734 4.84 5.2 0 .32-.126.594-.38.82-.24.214-.52.32-.84.32h-5.34c-.133 0-.186.06-.16.18.107.734.387 1.26.84 1.58.467.307 1.16.46 2.08.46.6 0 1.247-.086 1.94-.26a.815.815 0 0 1 .74.16c.227.174.34.4.34.68v.04c0 .334-.106.64-.32.92-.2.267-.46.427-.78.48-.773.147-1.573.22-2.4.22zm7.45-.2c-.307 0-.574-.113-.8-.34a1.129 1.129 0 0 1-.32-.8v-8.12a1.129 1.129 0 0 1 1.12-1.14h.98c.306 0 .566.114.78.34.226.227.34.494.34.8v2.78c0 .014.006.02.02.02l.04-.02 2.5-3.04c.48-.586 1.093-.88 1.84-.88h1.44c.213 0 .366.1.46.3.106.2.086.387-.06.56l-3.42 4.02c-.067.08-.067.167 0 .26l3.46 4.38c.146.187.166.38.06.58a.53.53 0 0 1-.5.3h-1.44c-.747 0-1.354-.3-1.82-.9l-2.52-3.28c-.014-.013-.027-.02-.04-.02-.014 0-.02.007-.02.02v3.04c0 .307-.114.574-.34.8a1.03 1.03 0 0 1-.78.34h-.98zm11.08-7.96c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8v-.16c0-.306.113-.573.34-.8.226-.226.493-.34.8-.34h7.24c.306 0 .573.114.8.34.226.227.34.494.34.8v.16c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-1.78c-.107 0-.16.06-.16.18v6.64c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-1.08c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8v-6.64c0-.12-.054-.18-.16-.18h-1.78zm11.557 7.96c-.307 0-.574-.113-.8-.34a1.095 1.095 0 0 1-.34-.8v-8.12c0-.306.113-.573.34-.8.226-.226.493-.34.8-.34h.94c.306 0 .573.114.8.34.226.227.34.494.34.8v4.84h.04l2.46-4.96c.333-.68.88-1.02 1.64-1.02h.98c.306 0 .573.114.8.34.226.227.34.494.34.8v8.12c0 .307-.114.574-.34.8-.227.227-.494.34-.8.34h-.94c-.307 0-.574-.113-.8-.34a1.093 1.093 0 0 1-.34-.8v-4.84h-.04l-2.46 4.96c-.334.68-.88 1.02-1.64 1.02h-.98zm14.209-4.26v2.14c0 .134.06.2.18.2.093.014.233.02.42.02 1.266 0 1.9-.446 1.9-1.34 0-.8-.627-1.2-1.88-1.2h-.44c-.12 0-.18.06-.18.18zm0-4.02v1.74c0 .107.06.16.18.16h.36c.506 0 .906-.1 1.2-.3.293-.2.44-.473.44-.82 0-.666-.534-1-1.6-1-.187 0-.32.007-.4.02-.12 0-.18.067-.18.2zm-2.08 8.32a1.235 1.235 0 0 1-1.14-1.24v-8a1.235 1.235 0 0 1 1.14-1.24c.84-.066 1.633-.1 2.38-.1 3.253 0 4.88.887 4.88 2.66 0 .6-.22 1.114-.66 1.54-.44.414-1.04.68-1.8.8v.02c0 .014.006.02.02.02.88.107 1.573.394 2.08.86.506.454.76 1 .76 1.64 0 1.04-.407 1.827-1.22 2.36-.8.52-2.1.78-3.9.78-.787 0-1.634-.033-2.54-.1zm14.599-4.8c-1.626 0-2.44.5-2.44 1.5 0 .36.107.647.32.86.214.2.5.3.86.3.64 0 1.16-.2 1.56-.6.4-.413.6-.96.6-1.64v-.24c0-.12-.06-.18-.18-.18h-.72zm-2.24 4.96c-.92 0-1.68-.293-2.28-.88-.586-.6-.88-1.373-.88-2.32 0-2.426 1.8-3.64 5.4-3.64h.72c.12 0 .18-.053.18-.16v-.1c0-.506-.133-.873-.4-1.1-.253-.226-.686-.34-1.3-.34-.813 0-1.786.127-2.92.38a.917.917 0 0 1-.76-.18.835.835 0 0 1-.32-.68v-.04c0-.333.1-.633.3-.9.214-.28.48-.446.8-.5 1.174-.226 2.187-.34 3.04-.34 1.747 0 2.98.314 3.7.94.734.627 1.1 1.667 1.1 3.12v5.4c0 .307-.113.574-.34.8-.226.227-.493.34-.8.34h-.74c-.32 0-.593-.106-.82-.32a1.198 1.198 0 0 1-.36-.82v-.22c0-.013-.006-.02-.02-.02-.026 0-.04.007-.04.02-.84 1.04-1.926 1.56-3.26 1.56z" fill="#2574CF"/></svg>
                </div>
            </router-link>
        </div>
        <div :class="{'t-hamburgerActive': mobVisible}" @click="callMobileMenu" class="t-hamburgerMenu" v-if="hamburger">
            <span class="t-hamburgerMenuLine"></span>
            <span class="t-hamburgerMenuLine"></span>
            <span class="t-hamburgerMenuLine"></span>
        </div>
        <transition name="headerMenu">
            <div class="t-headerRightSide" v-if="mobVisible">
                <nav class="t-navigation">
                    <ul class="t-mainList">
                        <router-link v-for="(item, index) in menuList"
                                     :key="index"
                                     :to="item.url"
                                     tag="li">
                            <a>{{ item.text }}</a>
                        </router-link>
                    </ul>
                </nav>
                <div class="t-callAndQuestion">
                    <button v-if="false" class="t-askQuestionBtn t-btn">Задать вопрос</button>
                    <div class="t-numberHolder">
                        <span class="t-number">+7 (495) 725–39–82</span>
                        <span class="t-numberBottomTitle">единый номер по России</span>
                    </div>
                </div>
            </div>
        </transition>
    </header>
</template>

<script>
    import { mapGetters, mapMutations } from 'vuex';
    export default {
        data() {
            return {
                hamburger: false,
                currentWidth: window.innerWidth
            }
        },
        computed: {
            mobVisible() {return this.$store.getters['modals/mobileMenu'];},
            ...mapGetters('menu', {
                menuList: 'items'
            })
        },
        methods: {
            ...mapMutations('modals',['showMobile', 'hideMobile']),
            callMobileMenu() {
                this.mobVisible === false ? this.showMobile() : this.hideMobile();
            },

            androidFixedMenu(event) {
                if(device.android() && window.innerWidth < 768) {
                    let getMainWrapper = document.querySelector('.t-wrapper');
                    getMainWrapper.style.cssText = 'padding-bottom: 0; display: flex; flex-direction: column;';

                    document.querySelector('main').style.order = '0';
                    document.querySelector('footer').style.order = '1';
                    this.$el.style.cssText = `position: relative!important; order: 2; height: 66px`;

                    let newEl = document.createElement('div');
                    newEl.classList.add('android');
                    newEl.style.cssText = `
                        left: 0;
                        position: fixed;
                        right: 0;
                        top: auto;
                        bottom: 0;
                        padding: 0 14px 0 12px;
                        height: 66px;
                        background-color: #fff;
                        z-index: 9999;
                        user-select: none;
                    `;

                    this.$el.childNodes.forEach((data, i) => {
                        newEl.appendChild(data);
                    });

                    this.$el.appendChild(newEl);

                }
            }
        },
        mounted() {
            this.androidFixedMenu();
        },
        created() {
            window.innerWidth < 1024 ? this.hideMobile() : this.showMobile();

            window.innerWidth < 1024 ? this.hamburger = true : this.hamburger = false;

            window.addEventListener('resize', () => {

//                window.innerWidth < 1024 ? this.hideMobile() : this.showMobile();

                window.innerWidth < 1024 ? this.hamburger = true : this.hamburger = false;

            }, false);
        }
    }
</script>

<style>

</style>